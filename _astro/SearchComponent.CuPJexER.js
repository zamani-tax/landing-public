import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Cd_vQiNd.js";function l(n=""){return String(n).trim().replace(/\u200c/g,"").replace(/[ی]/g,"ی").replace(/[ك]/g,"ک").replace(/[۰-۹]/g,s=>String("۰۱۲۳۴۵۶۷۸۹".indexOf(s))).toLowerCase()}function p(n){const s={};for(const o of Object.keys(n||{})){const t=o.trim(),c=n[o];s[t]=typeof c=="string"?c.trim():c}return s}function f(n){const s=p(n),o=Object.entries(s).map(([e,a])=>[l(e),e,a]),t=e=>{const a=o.find(([m])=>e.every(u=>m.includes(u)));return a?a[1]:null},c=t(["اینتاکد"])||t(["intacode"])||t(["کد","اینتا"])||t(["code"]),d=t(["شرح","فعالیت"])||t(["عنوان","فعالیت"])||t(["activity"])||t(["title"]),h=t(["سود","۱۴۰۲"])||t(["سود","1402"])||t(["profit","1402"]),g=t(["نسبت","سود","ناویژه"])||t(["نسبت","سود"])||t(["ضریب","سود"])||t(["margin"]),x=t(["نوع","شغل"])||t(["job","type"])||t(["شغل"])||t(["دسته"]);return{intacode:c?s[c]:"",title:d?s[d]:"",profit1402:h?s[h]:"",margin:g?s[g]:"",jobType:x?s[x]:"",__raw:s}}const b=()=>{const[n,s]=i.useState(""),[o,t]=i.useState([]),[c,d]=i.useState("");i.useEffect(()=>{fetch("/intacode.json").then(e=>{if(!e.ok)throw new Error("خطا در دریافت intacode.json");return e.json()}).then(e=>{let a=[];Array.isArray(e)?a=e:Array.isArray(e?.data)?a=e.data:typeof e=="object"&&(a=Object.values(e)),t(a),d("")}).catch(e=>{console.error(e),d("خطا در بارگذاری داده ها. مسیر /intacode.json را بررسی کنید.")})},[]);const h=i.useMemo(()=>o.map(f),[o]),g=i.useMemo(()=>{const e=l(n);return e.length<=1?[]:h.filter(a=>[l(a.intacode),l(a.title),l(a.profit1402),l(a.margin),l(a.jobType)].join(" ").includes(e)).slice(0,10)},[h,n]),x=e=>{s(e.target.value)};return r.jsxs("div",{className:"w-full max-w-3xl mx-auto",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"جستجو در «شرح فعالیت» یا «اینتاکد»…",value:n,onChange:x,className:"w-full border rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#B50000] dark:bg-[#0f172a] dark:text-gray-100 dark:border-gray-700",dir:"rtl","aria-label":"کادر جستجوی اینتاکد"}),c&&r.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:c})]}),n.trim().length>1&&r.jsx(r.Fragment,{children:g.length>0?r.jsxs("table",{className:"w-full mt-4 border border-gray-300 rounded-lg text-sm overflow-hidden dark:border-gray-700",children:[r.jsx("thead",{className:"bg-gray-200 dark:bg-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-right",children:"اینتاکد"}),r.jsx("th",{className:"p-2 text-right",children:"شرح فعالیت"}),r.jsx("th",{className:"p-2 text-right",children:"نوع شغل"}),r.jsx("th",{className:"p-2 text-right",children:"سود فعالیت ۱۴۰۲"}),r.jsx("th",{className:"p-2 text-right",children:"نسبت سود ناویژه"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-slate-900",children:g.map((e,a)=>r.jsxs("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-slate-800 dark:border-gray-700",children:[r.jsx("td",{className:"p-2",children:e.intacode||"—"}),r.jsx("td",{className:"p-2",children:e.title||"—"}),r.jsx("td",{className:"p-2",children:e.jobType||"—"}),r.jsx("td",{className:"p-2",children:e.profit1402||"—"}),r.jsx("td",{className:"p-2",children:e.margin||"—"})]},a))})]}):r.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:"هیچ موردی یافت نشد."})})]})};export{b as default};
