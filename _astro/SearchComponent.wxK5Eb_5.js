import{r as x}from"./index.RH_Wq4ov.js";var p={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g;function y(){if(g)return m;g=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(r,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:o}}return m.Fragment=s,m.jsx=l,m.jsxs=l,m}var j;function k(){return j||(j=1,p.exports=y()),p.exports}var t=k();function h(n=""){return String(n).trim().replace(/\u200c/g,"").replace(/[ي]/g,"ی").replace(/[ك]/g,"ک").replace(/[۰-۹]/g,s=>String("۰۱۲۳۴۵۶۷۸۹".indexOf(s))).toLowerCase()}function v(n){const s={};for(const l of Object.keys(n||{})){const r=l.trim(),a=n[l];s[r]=typeof a=="string"?a.trim():a}return s}function b(n){const s=v(n),l=Object.entries(s).map(([u,e])=>[h(u),u,e]),r=u=>{const e=l.find(([i])=>u.every(f=>i.includes(f)));return e?e[1]:null},a=r(["اینتاکد"])||r(["intacode"])||r(["کد","اینتا"])||r(["code"]),o=r(["شرح","فعالیت"])||r(["عنوان","فعالیت"])||r(["activity"])||r(["title"]),c=r(["سود","۱۴۰۲"])||r(["سود","1402"])||r(["profit","1402"]),d=r(["نسبت","سود","ناویژه"])||r(["نسبت","سود"])||r(["ضریب","سود"])||r(["margin"]);return{intacode:a?s[a]:"",title:o?s[o]:"",profit1402:c?s[c]:"",margin:d?s[d]:"",__raw:s}}const R=()=>{const[n,s]=x.useState(""),[l,r]=x.useState([]),[a,o]=x.useState("");x.useEffect(()=>{fetch("/intacode.json").then(e=>{if(!e.ok)throw new Error("خطا در دریافت intacode.json");return e.json()}).then(e=>{let i=[];Array.isArray(e)?i=e:Array.isArray(e?.data)?i=e.data:typeof e=="object"&&(i=Object.values(e)),r(i),o("")}).catch(e=>{console.error(e),o("خطا در بارگذاری داده‌ها. مسیر /intacode.json را بررسی کنید.")})},[]);const c=x.useMemo(()=>l.map(b),[l]),d=x.useMemo(()=>{const e=h(n);return e.length<=1?[]:c.filter(i=>[h(i.intacode),h(i.title),h(i.profit1402),h(i.margin)].join(" ").includes(e)).slice(0,10)},[c,n]),u=e=>{s(e.target.value)};return t.jsxs("div",{className:"w-full max-w-3xl mx-auto",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"جستجو در «شرح فعالیت» یا «اینتاکد»…",value:n,onChange:u,className:"w-full border rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#B50000] dark:bg-[#0f172a] dark:text-gray-100 dark:border-gray-700",dir:"rtl","aria-label":"کادر جستجوی اینتاکد"}),a&&t.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:a})]}),n.trim().length>1&&t.jsx(t.Fragment,{children:d.length>0?t.jsxs("table",{className:"w-full mt-4 border border-gray-300 rounded-lg text-sm overflow-hidden dark:border-gray-700",children:[t.jsx("thead",{className:"bg-gray-200 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-2 text-right",children:"اینتاکد"}),t.jsx("th",{className:"p-2 text-right",children:"شرح فعالیت"}),t.jsx("th",{className:"p-2 text-right",children:"سود فعالیت ۱۴۰۲"}),t.jsx("th",{className:"p-2 text-right",children:"نسبت سود ناویژه"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-slate-900",children:d.map((e,i)=>t.jsxs("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-slate-800 dark:border-gray-700",children:[t.jsx("td",{className:"p-2",children:e.intacode||"—"}),t.jsx("td",{className:"p-2",children:e.title||"—"}),t.jsx("td",{className:"p-2",children:e.profit1402||"—"}),t.jsx("td",{className:"p-2",children:e.margin||"—"})]},i))})]}):t.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:"هیچ موردی یافت نشد."})})]})};export{R as default};
