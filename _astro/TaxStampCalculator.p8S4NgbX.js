import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as x}from"./index.RH_Wq4ov.js";const c=a=>new Intl.NumberFormat("fa-IR").format(Math.round(a||0)),u=a=>{const n=Math.max(0,Math.min(a,4e8)),d=Math.max(0,Math.min(a-4e8,8e8)),o=Math.max(0,a-12e8),l=n*.05,s=d*.04,m=o*.03,p=l+s+m,h=p*.05;return{A:n,B:d,C:o,feeA:l,feeB:s,feeC:m,totalFee:p,stamp:h}},N=(a,t)=>[["شرح","مقدار"],["مابه التفاوت (ریال)",String(a)],["پله A (تا ۴۰۰,۰۰۰,۰۰۰) — ۵٪",String(t.A)],["حق الوکاله پله A",String(t.feeA)],["پله B (۴۰۰م تا ۱.۲م) — ۴٪",String(t.B)],["حق الوکاله پله B",String(t.feeB)],["پله C (مازاد ۱.۲م) — ۳٪",String(t.C)],["حق الوکاله پله C",String(t.feeC)],["جمع حق الوکاله",String(t.totalFee)],["تمبر (۵٪ جمع)",String(t.stamp)]].map(n=>n.join(",")).join(`
`),b=(a,t)=>{const i=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(i),d=document.createElement("a");d.href=n,d.download=a,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(n)};function g(){const[a,t]=x.useState(""),[i,n]=x.useState(""),[d,o]=x.useState(!1),l=x.useMemo(()=>{const r=(a||"").toString().replace(/[,\\s\\u066B\\u066C]/g,""),j=Number(r);return Number.isFinite(j)?Math.max(0,Math.floor(j)):NaN},[a]),s=x.useMemo(()=>!Number.isFinite(l)||l<=0?null:u(l),[l]),m=r=>{r.preventDefault(),o(!0)},p=()=>{t(""),n(""),o(!1)},h=d&&(!Number.isFinite(l)||l<=0);return e.jsxs("div",{className:"rounded-2xl border border-[#D1D2D4]/30 bg-[#2F3859]/5 dark:bg-[#2F3859]/10 p-5 md:p-6 shadow-sm",children:[e.jsxs("form",{onSubmit:m,onReset:p,className:"space-y-4 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"مابه التفاوت (ریال)"}),e.jsx("input",{inputMode:"numeric",autoComplete:"off",value:a,onChange:r=>t(r.target.value),placeholder:"مثلا 5,000,000,000",className:"w-full rounded-xl border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#172778]"}),h&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"عدد معتبر و بزرگ تر از صفر وارد کنید."}),e.jsxs("p",{className:"mt-2 text-xs opacity-70",children:["تمام ارقام بر حسب ",e.jsx("b",{children:"ریال"})," هستند."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"عنوان/توضیح پرونده (اختیاری)"}),e.jsx("input",{value:i,onChange:r=>n(r.target.value),placeholder:"مثلا: پرونده شرکت نمونه",className:"w-full rounded-xl border px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#172778]"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsx("button",{type:"reset",className:"px-4 py-2 rounded-xl border",children:"بازنشانی"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 rounded-xl bg-[#B50000] text-white hover:opacity-90",children:"محاسبه"})]})]}),s&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-xl border p-4",children:[e.jsx("div",{className:"text-sm opacity-70",children:"مابه التفاوت"}),e.jsxs("div",{className:"text-xl font-bold",children:[c(l)," ",e.jsx("span",{className:"text-sm",children:"ریال"})]})]}),e.jsxs("div",{className:"rounded-xl border p-4",children:[e.jsx("div",{className:"text-sm opacity-70",children:"جمع حق الوکاله"}),e.jsxs("div",{className:"text-xl font-bold",children:[c(s.totalFee)," ",e.jsx("span",{className:"text-sm",children:"ریال"})]})]}),e.jsxs("div",{className:"rounded-xl border p-4",children:[e.jsx("div",{className:"text-sm opacity-70",children:"تمبر (۵٪ جمع حق الوکاله)"}),e.jsxs("div",{className:"text-xl font-bold",children:[c(s.stamp)," ",e.jsx("span",{className:"text-sm",children:"ریال"})]})]})]}),s&&e.jsx("div",{className:"mt-8 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-right border rounded-xl overflow-hidden",children:[e.jsx("thead",{className:"bg-[#DDD5BE]/40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"شرح"}),e.jsx("th",{className:"px-4 py-3",children:"بازه/مبنای محاسبه"}),e.jsx("th",{className:"px-4 py-3",children:"نرخ"}),e.jsx("th",{className:"px-4 py-3",children:"مبلغ مشمول (ریال)"}),e.jsx("th",{className:"px-4 py-3",children:"حق الوکاله این پله (ریال)"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:"پله A"}),e.jsx("td",{className:"px-4 py-3",children:"تا ۴۰۰,۰۰۰,۰۰۰"}),e.jsx("td",{className:"px-4 py-3",children:"۵٪"}),e.jsx("td",{className:"px-4 py-3",children:c(s.A)}),e.jsx("td",{className:"px-4 py-3",children:c(s.feeA)})]}),e.jsxs("tr",{className:"bg-black/5",children:[e.jsx("td",{className:"px-4 py-3",children:"پله B"}),e.jsx("td",{className:"px-4 py-3",children:"۴۰۰م تا ۱.۲م (مازاد)"}),e.jsx("td",{className:"px-4 py-3",children:"۴٪"}),e.jsx("td",{className:"px-4 py-3",children:c(s.B)}),e.jsx("td",{className:"px-4 py-3",children:c(s.feeB)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3",children:"پله C"}),e.jsx("td",{className:"px-4 py-3",children:"مازاد ۱.۲میلیارد"}),e.jsx("td",{className:"px-4 py-3",children:"۳٪"}),e.jsx("td",{className:"px-4 py-3",children:c(s.C)}),e.jsx("td",{className:"px-4 py-3",children:c(s.feeC)})]}),e.jsxs("tr",{className:"bg-black/5",children:[e.jsx("td",{className:"px-4 py-3 font-semibold",children:"جمع حق الوکاله"}),e.jsx("td",{className:"px-4 py-3",children:"—"}),e.jsx("td",{className:"px-4 py-3",children:"—"}),e.jsx("td",{className:"px-4 py-3",children:"—"}),e.jsx("td",{className:"px-4 py-3 font-bold",children:c(s.totalFee)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-semibold",children:"تمبر (۵٪ جمع)"}),e.jsx("td",{className:"px-4 py-3",children:"—"}),e.jsx("td",{className:"px-4 py-3",children:"—"}),e.jsx("td",{className:"px-4 py-3",children:"—"}),e.jsx("td",{className:"px-4 py-3 font-bold",children:c(s.stamp)})]})]})]})}),s&&e.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3 justify-end",children:[e.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2 rounded-xl border",children:"پرینت"}),e.jsx("button",{onClick:()=>b(`stamp-fee-${Date.now()}.csv`,N(l,s)),className:"px-5 py-2.5 rounded-xl bg-[#172778] text-white hover:opacity-90",children:"دانلود CSV"})]}),e.jsxs("details",{className:"mt-10 rounded-xl border p-4",children:[e.jsx("summary",{className:"cursor-pointer font-semibold",children:"مثال عددی (۵,۰۰۰,۰۰۰,۰۰۰ ریال)"}),e.jsx("div",{className:"mt-3 text-sm leading-8",children:e.jsx("p",{children:"با فرض Δ = ۵,۰۰۰,۰۰۰,۰۰۰ ریال: پله A = ۴۰۰,۰۰۰,۰۰۰ → ۵٪ = ۲۰,۰۰۰,۰۰۰؛ پله B = ۸۰۰,۰۰۰,۰۰۰ → ۴٪ = ۳۲,۰۰۰,۰۰۰؛ پله C = ۳,۸۰۰,۰۰۰,۰۰۰ → ۳٪ = ۱۱۴,۰۰۰,۰۰۰. جمع حق الوکاله = ۱۶۶,۰۰۰,۰۰۰ ریال؛ تمبر = ۸,۳۰۰,۰۰۰ ریال."})})]}),e.jsx("p",{className:"mt-8 text-xs opacity-70",children:"این ابزار جنبه راهنمایی دارد. مسیولیت نهایی محاسبات با کاربر است. در صورت تغییر بخشنامه ها، مقادیر قابل به روزرسانی است."})]})}export{g as default};
