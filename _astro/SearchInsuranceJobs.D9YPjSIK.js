import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.WFquGv8Z.js";function g(a=""){return String(a).replace(/\u200c/g,"").replace(/\u00a0/g," ").replace(/\u0640/g,"").trim().replace(/[ی]/g,"ی").replace(/[ك]/g,"ک").replace(/[۰-۹]/g,s=>String("۰۱۲۳۴۵۶۷۸۹".indexOf(s))).toLowerCase()}function h(a){const s={};for(const c of Object.keys(a||{})){const t=c.replace(/\u00a0/g," ").replace(/\u0640/g,"").trim(),o=a[c];s[t]=typeof o=="string"?o.trim():o}return s}function x(a){const s=h(a),c=Object.entries(s).map(([n,i])=>[g(n),n,i]),t=n=>{const i=c.find(([e])=>n.every(l=>e.includes(l)));return i?i[1]:null},o=t(["کد","شغل"])||t(["كد","شغل"])||t(["code","job"])||t(["کد"])||t(["كد"]),m=t(["عناوین","شغلی"])||t(["عنوان","شغلی"])||t(["title"])||t(["job","title"]),u=n=>n==null?"":String(n).trim();return{code:u(o?s[o]:""),title:u(m?s[m]:""),__raw:s}}const b=()=>{const[a,s]=d.useState(""),[c,t]=d.useState([]),[o,m]=d.useState("");d.useEffect(()=>{fetch("/code-mashaghele-bime.json").then(e=>{if(!e.ok)throw new Error("خطا در دریافت code-mashaghele-bime.json");return e.json()}).then(e=>{let l=[];Array.isArray(e)?l=e:Array.isArray(e?.data)?l=e.data:typeof e=="object"&&(l=Object.values(e)),t(l),m("")}).catch(e=>{console.error(e),m("خطا در بارگذاری داده ها. مسیر /code-mashaghele-bime.json را بررسی کنید.")})},[]);const u=d.useMemo(()=>c.map(x),[c]),n=d.useMemo(()=>{const e=g(a);return e.length<=1?[]:u.filter(l=>`${g(l.code)} ${g(l.title)}`.includes(e)).slice(0,5e4)},[u,a]),i=e=>s(e.target.value);return r.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"جستجو در «عنوان شغلی» یا «کد شغل»…",value:a,onChange:i,className:"w-full border rounded-lg p-3 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#B50000] dark:bg-[#0f172a] dark:text-gray-100 dark:border-gray-700",dir:"rtl","aria-label":"کادر جستجوی جدول مشاغل بیمه"}),o&&r.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:o})]}),a.trim().length>1&&r.jsx(r.Fragment,{children:n.length>0?r.jsxs("table",{className:"w-full mt-4 border border-gray-300 rounded-lg text-sm overflow-hidden dark:border-gray-700",children:[r.jsx("thead",{className:"bg-gray-200 dark:bg-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 text-right w-40",children:"کد شغل"}),r.jsx("th",{className:"p-2 text-right",children:"عنوان شغلی"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-slate-900",children:n.map((e,l)=>r.jsxs("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-slate-800 dark:border-gray-700",children:[r.jsx("td",{className:"p-2 font-mono",dir:"ltr",children:e.code||"—"}),r.jsx("td",{className:"p-2",children:e.title||"—"})]},l))})]}):r.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:"هیچ موردی یافت نشد."})})]})};export{b as default};
