import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.RH_Wq4ov.js";const S={1402:{income:2e11,assets:35e10},recent:{income:3e11,assets:5e11}},D=new Set(["foreign_office","public_company","holding","ngo"]);function g(s){const r=typeof s=="number"?s:Number(String(s).replace(/[^\d]/g,""));if(Number.isNaN(r))return"";try{return r.toLocaleString("fa-IR")}catch{return r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}function p(s){const r=(s??"").replace(/[^\d]/g,"");return r?parseInt(r,10):0}function M(s){const r=(s??"").match(/(13|14)\d{2}/);return r?parseInt(r[0],10):null}function $(){const[s,r]=t.useState(""),[w,C]=t.useState("legal"),[c,_]=t.useState("other"),[d,F]=t.useState(""),[u,I]=t.useState(""),[f,h]=t.useState(!1),[b,y]=t.useState(""),[n,j]=t.useState(null),x=t.useMemo(()=>p(d),[d]),N=t.useMemo(()=>p(u),[u]),m=t.useMemo(()=>M(s),[s]),i=t.useMemo(()=>m===1402?S[1402]:S.recent,[m]);function B(a){if(a.preventDefault(),y(""),j(null),!x&&!N&&c==="other"){y("حداقل یکی از ارقام درآمد یا دارایی را وارد کنید.");return}h(!0),window.setTimeout(()=>{let l=!1,o="";D.has(c)?(l=!0,o="به دلیل نوع فعالیت، در دسته همیشه مشمول است."):x>i.income||N>i.assets?(l=!0,o=`عبور ${x>i.income?"درآمد":"دارایی"} از حدنصاب سال مربوط.`):(l=!1,o="نوع فعالیت در دسته همیشه مشمول نیست و ارقام از حدنصاب عبور نکرده اند."),j({subject:l,reason:o,fy:m??null,thr:i}),h(!1)},300)}function v(a){return l=>{const o=l.target.value,k=p(o);a(k?g(k):"")}}return e.jsxs("section",{dir:"rtl",className:"w-full",children:[e.jsxs("header",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2 bg-gradient-to-r from-[#B50000] to-[#172778] bg-clip-text text-transparent",children:"محاسبه مشمولیت حسابرسی ماده ۲۷۲"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:"تاریخ شروع سال مالی، نوع فعالیت و ارقام درآمد و دارایی را وارد کنید و نتیجه را ببینید."})]}),e.jsxs("div",{className:"mx-auto max-w-3xl rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm bg-white dark:bg-[#1f2330]",children:[e.jsxs("form",{className:"p-4 md:p-6 space-y-4",onSubmit:B,noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"fiscal_start",className:"mb-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:"تاریخ شروع سال مالی"}),e.jsx("input",{id:"fiscal_start",name:"fiscal_start",inputMode:"numeric",placeholder:"مثال: 1403/01/01",className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#2F3859] text-gray-900 dark:text-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#C49344]",value:s,onChange:a=>r(a.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"فقط برای تشخیص سال (۱۴۰۲ یا ۱۴۰۳/۱۴۰۴)."})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"person_type",className:"mb-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:"نوع شخصیت"}),e.jsxs("select",{id:"person_type",name:"person_type",className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#2F3859] text-gray-900 dark:text-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#C49344]",value:w,onChange:a=>C(a.target.value),children:[e.jsx("option",{value:"legal",children:"حقوقی"}),e.jsx("option",{value:"real",children:"حقیقی"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"activity_type",className:"mb-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:"نوع فعالیت"}),e.jsxs("select",{id:"activity_type",name:"activity_type",className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#2F3859] text-gray-900 dark:text-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#C49344]",value:c,onChange:a=>_(a.target.value),children:[e.jsx("option",{value:"foreign_office",children:"شعب یا دفاتر شرکت های خارجی"}),e.jsx("option",{value:"public_company",children:"شرکت های سهامی عام و تابعه"}),e.jsx("option",{value:"holding",children:"شرکت های سرمایه گذاری و هلدینگ"}),e.jsx("option",{value:"ngo",children:"نهاد های عمومی غیر دولتی"}),e.jsx("option",{value:"other",children:"سایر"})]}),e.jsx("span",{className:"mt-1 text-xs text-gray-500",children:"گزینه های بالا همیشه مشمول هستند."})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"income",className:"mb-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:"جمع درآمد ناخالص (ریال)"}),e.jsx("input",{id:"income",name:"income",inputMode:"numeric",placeholder:"مثال: 500,000,000,000",className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#2F3859] text-gray-900 dark:text-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#C49344]",value:d,onChange:v(F)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"assets",className:"mb-1 text-sm font-medium text-gray-800 dark:text-gray-200",children:"جمع دارایی ها (ریال)"}),e.jsx("input",{id:"assets",name:"assets",inputMode:"numeric",placeholder:"مثال: 800,000,000,000",className:"rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-[#2F3859] text-gray-900 dark:text-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#C49344]",value:u,onChange:v(I)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:f,className:"w-full md:w-auto px-5 py-2.5 rounded-xl font-semibold shadow-sm text-white bg-[#172778] hover:bg-[#2F3859] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#C49344] disabled:opacity-60",children:f?"در حال بررسی...":"بررسی مشمولیت"})})]}),b&&e.jsx("div",{className:"text-xs text-[#B50000] bg-[#DDD5BE] border border-[#C49344] rounded-lg px-3 py-2",children:b})]}),e.jsx("div",{className:"px-4 md:px-6 pb-6",children:n&&e.jsx("div",{className:"mt-4 rounded-xl border border-gray-200 dark:border-gray-700 p-4 bg-[#DDD5BE]/30",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-1 h-3 w-3 rounded-full ${n.subject?"bg-[#B50000]":"bg-emerald-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${n.subject?"text-[#B50000]":"text-emerald-600"}`,children:n.subject?"نتیجه: مشمول حسابرسی":"نتیجه: غیرمشمول حسابرسی"}),e.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-200",children:n.reason}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 whitespace-pre-line",children:`سال مالی: ${n.fy??"نامشخص"}
حدنصاب درآمد: ${g(n.thr.income)} ریال — حدنصاب دارایی: ${g(n.thr.assets)} ریال`})]})]})})})]})]})}export{$ as default};
