import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.RH_Wq4ov.js";const H="۰۱۲۳۴۵۶۷۸۹",X="٠١٢٣٤٥٦٧٨٩",i=s=>(s||"").replace(/[۰-۹]/g,t=>String(H.indexOf(t))).replace(/[٠-٩]/g,t=>String(X.indexOf(t))).replace(/[\u066B\u066C,\u060C\s_]/g,""),h=s=>{const t=Number(s||"0");return isNaN(t)?0:t},n=s=>{const t=typeof s=="string"?Number(i(s)):s;return isFinite(t)?new Intl.NumberFormat("fa-IR").format(Math.round(t)):""},y=2e8*10,R=2e8*10;function F(s){const t=Math.min(s,y),l=Math.min(Math.max(s-y,0),R),m=Math.max(s-y-R,0),o=.15*t+.2*l+.25*m;return{slab1:t,slab2:l,slab3:m,tax:o}}function J(){const[s,t]=c.useState("individual"),[l,m]=c.useState(!1),[o,D]=c.useState(""),[u,T]=c.useState(""),x=2e9,[g,E]=c.useState(String(x)),[p,B]=c.useState(!1),r=c.useMemo(()=>{const a=h(i(o)),d=h(i(u)),f=d*12,b=.015*a,M=b*12,L=d+b,Y=f+M,N=Y*.75,P=Math.max(0,h(i(g))),_=s==="individual"&&!p?Math.min(P,x):0,v=s==="individual"?Math.max(N-_,0):N,C=s==="individual"?F(v).tax:.25*v,A=C/12;let I={baseY:0,baseM:0,taxY:0,taxM:0,payM:0};if(l){const O=d*.75,w=O*12,S=s==="individual"?F(w).tax:.25*w,k=S/12,q=Math.max(d-k,0);I={baseY:w,baseM:O,taxY:S,taxM:k,payM:q}}return{ownerType:s,tenantIsCorporate:l,deposit:a,rentM:d,rentY:f,rentFromDeposit_M:b,rentFromDeposit_Y:M,grossM:L,grossY:Y,netBeforePersonal_Y:N,ex57Year:_,EX57_CAP_1404:x,taxableY:v,taxOwnerY:C,taxOwnerM:A,withhold:I}},[s,l,o,u,g,p]),j=s==="corporate"||p;return e.jsxs("div",{className:"bg-card text-foreground border rounded-2xl shadow-sm",dir:"rtl",children:[e.jsxs("div",{className:"rounded-t-2xl p-5 md:p-6 bg-card flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"نوع مالک:"}),e.jsxs("select",{className:"px-3 py-2 rounded-lg border bg-input-background text-foreground",value:s,onChange:a=>t(a.target.value),children:[e.jsx("option",{value:"individual",children:"شخص حقیقی"}),e.jsx("option",{value:"corporate",children:"شخص حقوقی"})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:a=>m(a.target.checked)}),e.jsx("span",{children:"مستأجر حقوقی است"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:"مبلغ رهن (ریال)"}),e.jsx("input",{dir:"ltr",inputMode:"numeric",className:"px-3 py-2 rounded-lg border bg-input-background text-foreground",placeholder:"۱٬۰۰۰٬۰۰۰٬۰۰۰",value:n(o),onChange:a=>D(i(a.target.value))}),e.jsx("small",{className:"text-muted-foreground",children:"۱٫۵٪ ماهانه به‌عنوان اجاره فرضی"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:"اجاره نقدی ماهانه (ریال)"}),e.jsx("input",{dir:"ltr",inputMode:"numeric",className:"px-3 py-2 rounded-lg border bg-input-background text-foreground",placeholder:"۱۰۰٬۰۰۰٬۰۰۰",value:n(u),onChange:a=>T(i(a.target.value))})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:"اجاره نقدی سالانه (ریال)"}),e.jsx("input",{dir:"ltr",readOnly:!0,className:"px-3 py-2 rounded-lg border bg-muted text-foreground cursor-not-allowed",value:n(h(i(u))*12)})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:"معافیت ماده ۵۷ (سالانه — ریال)"}),e.jsx("input",{dir:"ltr",inputMode:"numeric",disabled:j,className:"px-3 py-2 rounded-lg border text-foreground "+(j?"bg-muted cursor-not-allowed opacity-70":"bg-input-background"),placeholder:n(x),value:n(g),onChange:a=>{if(j)return;const d=h(i(a.target.value)),f=Math.max(0,Math.min(d,x));E(String(f))},title:j?"برای مالک حقوقی یا در صورت داشتن درآمد دیگر اعمال نمی‌شود.":"حداکثر تا سقف مصوب ۱۴۰۴"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{id:"hasOtherIncome",type:"checkbox",checked:p,onChange:a=>B(a.target.checked)}),e.jsx("label",{htmlFor:"hasOtherIncome",className:"text-sm text-muted-foreground",children:"دارای درآمد دیگری هستم (حقوق/مشاغل و …) — در این حالت معافیت ۵۷ اعمال نمی‌شود."})]})]})]})]}),e.jsxs("div",{className:"p-5 md:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("section",{className:"border rounded-xl p-4 order-1 md:order-1",children:[e.jsx("h3",{className:"font-medium mb-3",children:"نتیجه مالیات مالک"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"اجاره فرضی از رهن (ماهانه)"}),e.jsxs("span",{dir:"ltr",children:[n(r.rentFromDeposit_M)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"اجاره فرضی از رهن (سالانه)"}),e.jsxs("span",{dir:"ltr",children:[n(r.rentFromDeposit_Y)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"اجاره نقدی ماهانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.rentM)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"اجاره نقدی سالانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.rentY)," ریال"]})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"جمع اجاره مشمول (سالانه)"}),e.jsxs("span",{dir:"ltr",children:[n(r.grossY)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"پس از کسر هزینه‌ها (۲۵٪) — سالانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.netBeforePersonal_Y)," ریال"]})]}),s==="individual"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"کسر معافیت ماده ۵۷ — سالانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.ex57Year)," ریال"]})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"درآمد مشمول مالیات — سالانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.taxableY)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"مالیات نهایی مالک — سالانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.taxOwnerY)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"مالیات نهایی مالک — ماهانه (نمایشی)"}),e.jsxs("span",{dir:"ltr",children:[n(r.taxOwnerM)," ریال"]})]})]})]}),e.jsxs("section",{className:"border rounded-xl p-4 order-2 md:order-2",children:[e.jsx("h3",{className:"font-medium mb-3",children:"کسر مالیات تکلیفی مستأجر حقوقی"}),l?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"مبنای مشمول (اجاره نقدی × ۷۵٪) — ماهانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.withhold.baseM)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"مبنای مشمول (اجاره نقدی × ۷۵٪) — سالانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.withhold.baseY)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["مالیات تکلیفی قابل کسر — سالانه (",s==="individual"?"پلکانی":"۲۵٪",")"]}),e.jsxs("span",{dir:"ltr",className:"font-medium",children:[n(r.withhold.taxY)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"مالیات تکلیفی قابل کسر — ماهانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.withhold.taxM)," ریال"]})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"پرداخت خالص به مالک پس از کسر — ماهانه"}),e.jsxs("span",{dir:"ltr",children:[n(r.withhold.payM)," ریال"]})]})]})}):e.jsxs("div",{className:"text-sm text-muted-foreground",children:["با توجه به اینکه ",e.jsx("strong",{children:"مستأجر شخص حقیقی"})," است، مسیولیتی برای کسر مالیات تکلیفی وجود ندارد."]})]})]}),e.jsxs("section",{className:"mt-6 border rounded-xl p-4 text-sm text-muted-foreground leading-7",children:[e.jsx("h4",{className:"font-medium mb-2 text-foreground",children:"نکات مهم"}),e.jsxs("ul",{className:"list-disc pr-5 space-y-1",children:[e.jsx("li",{children:"اگه بخوای رهن رو به اجاره تبدیل کنی، باید ماهی ۱.۵٪ از مبلغ رهن رو به عنوان اجاره فرضی حساب کنی."}),e.jsx("li",{children:"طبق قانون، ۲۵٪ از کل اجاره - چه نقدی، چه فرضی - بابت هزینه و استهلاکات کم می‌شه."}),e.jsx("li",{children:"اگه مستاجر یه شرکت یا موسسه باشه، مالیات فقط روی اجاره نقدی بعد از کسر اون ۲۵٪ حساب می‌شه؛ رهن اصلا لحاظ نمی‌شه."}),e.jsx("li",{children:"معافیت ماده ۵۷ فقط برای مالکیه که حقیقی باشه و هیچ درآمد دیگه‌ای از حقوق یا مشاغل و … نداشته باشه. سقف معافیت برای سال ۱۴۰۴ هم، ۲ میلیارد ریاله."}),e.jsx("li",{children:"برای هر مالک اجاره خونه‌ها تا متراژ ۱۵۰ متر در تهران و ۲۰۰ متر در شهرای دیگه،  از مالیات معافه."})]})]})]})]})}export{J as default};
